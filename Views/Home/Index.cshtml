@{
    ViewData["Title"] = "Home";
}

<div class="container mt-4">
    <h1 class="text-center">Media Tracker</h1>

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success text-center" role="alert">
            @TempData["Message"]
        </div>
    }

    <div class="row justify-content-center">
        <div class="col-md-6">
            <h3 class="text-center mb-4">Add New</h3>
            <form method="post" action="/Home/AddNew">
                <div class="form-group mb-3">
                    <label for="Class">Class</label>
                    <select id="Class" name="Class" class="form-control" onchange="toggleSeasonField()" required>
                        <option value="" disabled selected>Select Class</option>
                        <option value="Movie">Movie</option>
                        <option value="Show">Show</option>
                        <option value="Book">Book</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="InputTitle">Input Title</label>
                    <input type="text" id="InputTitle" name="InputTitle" class="form-control" placeholder="Enter Title" required />
                </div>

                <!-- Season Field (Hidden initially) -->
                <div class="form-group mb-3" id="SeasonField" style="display: none;">
                    <label for="Season">Season</label>
                    <input type="number" id="Season" name="Season" class="form-control" placeholder="Enter Season" min="1" />
                </div>

                <div class="form-group mb-3">
                    <label for="YearFinished">Year Finished</label>
                    <select id="YearFinished" name="YearFinished" class="form-control" required>
                        <option value="" disabled selected>Select Year</option>
                        @for (int year = 2000; year <= DateTime.Now.Year; year++)
                        {
                            <option value="@year">@year</option>
                        }
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="Rating">Rating</label>
                    <div class="rating" id="Rating">
                        <input type="radio" id="star5" name="Rating" value="5" required />
                        <label for="star5" title="5 stars">★</label>
                        <input type="radio" id="star4" name="Rating" value="4" />
                        <label for="star4" title="4 stars">★</label>
                        <input type="radio" id="star3" name="Rating" value="3" />
                        <label for="star3" title="3 stars">★</label>
                        <input type="radio" id="star2" name="Rating" value="2" />
                        <label for="star2" title="2 stars">★</label>
                        <input type="radio" id="star1" name="Rating" value="1" />
                        <label for="star1" title="1 star">★</label>
                    </div>
                </div>
                <div class="form-group mb-3">
                    <label for="Review">Review (Optional)</label>
                    <textarea id="Review" name="Review" class="form-control" placeholder="Write your review here..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">Add</button>
            </form>
        </div>
    </div>
</div>

<script>
    // Toggle visibility of the Season field based on Class selection
    function toggleSeasonField() {
        const classField = document.getElementById("Class").value;
        const seasonField = document.getElementById("SeasonField");
        if (classField === "Show") {
            seasonField.style.display = "block";
        } else {
            seasonField.style.display = "none";
        }
    }
</script>
